<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WHIP</title>
  <meta name="theme-color" content="#F6F2EA" />

  <!-- Fonts: Kitsch/Hip -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" as="style" crossorigin
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.css" />

  <style>
    :root{
      --bg:#F6F2EA;      /* ivory */
      --fg:#121212;
      --line: rgba(18,18,18,.12);
      --shadow: 0 18px 50px rgba(0,0,0,.10);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background: var(--bg);
      color: var(--fg);
      padding: 24px 16px;
      font-family: "Pretendard Variable", system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    }
    .wrap{
      width:min(520px, 96vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 18px;
    }

    /* --- Screen 1: whip only --- */
    .whipScreen{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
    }
    .whipBtn{
      border:none;
      background: transparent;
      padding:0;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
      transform: translateY(0);
      transition: transform .08s ease;
    }
    .whipBtn:active{ transform: translateY(2px); }
    .whipImg{
      width: min(320px, 82vw);
      height: auto;
      display:block;
      filter: drop-shadow(0 18px 22px rgba(0,0,0,.12));
    }

    /* --- Screen 2: quote + button only --- */
    .quoteScreen{
      display:none;
      width:100%;
      flex-direction:column;
      align-items:center;
      gap: 12px;
      animation: fadeUp .18s ease-out forwards;
    }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(8px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .quote{
      width:100%;
      text-align:center;
      font-family: "Black Han Sans", system-ui, sans-serif;
      font-size: 28px;
      line-height: 1.25;
      letter-spacing: -.02em;
      min-height: 112px;
      padding: 0 10px;
    }

    .btn{
      width: 180px;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.65);
      box-shadow: 0 12px 26px rgba(0,0,0,.08);
      font-family: "Pretendard Variable", system-ui, sans-serif;
      font-weight: 650;
      font-size: 13px;
      cursor: pointer;
      transition: transform .08s ease;
    }
    .btn:active{ transform: translateY(1px); }

    .pop{ animation: pop .12s ease-out; }
    @keyframes pop{
      from{ transform: scale(.99); opacity:.6; }
      to{ transform: scale(1); opacity:1; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- SCREEN 1: whip only -->
    <div class="whipScreen" id="whipScreen">
      <button class="whipBtn" id="whipBtn" aria-label="채찍">
        <img class="whipImg" src="assets/whip.png" alt="whip" />
      </button>
    </div>

    <!-- SCREEN 2: quote + one button -->
    <div class="quoteScreen" id="quoteScreen">
      <div class="quote" id="quote"></div>
      <button class="btn" id="moreBtn" type="button">한대 더</button>
    </div>
  </div>

  <script>
    const QUOTES = [
      "지금 안 하면, 그냥 안 하는 사람이야.",
      "완벽 기다리지 말고, 10분만 시작해.",
      "핑계는 네 하루를 먹는다. 끊어.",
      "기분 말고 약속으로 움직여.",
      "미루는 순간, 내일이 더 무거워진다.",
      "딱 하나만 끝내. 그게 오늘을 바꿔.",
      "할 수 있냐고? 해. 지금.",
      "생각은 충분해. 몸이 움직일 차례야.",
      "‘나중에’는 거의 항상 ‘안 함’이다.",
      "지금 시작하면 오늘이 달라진다.",
      "오늘의 너는, 어제의 선택 결과야.",
      "하기 싫어도 해. 그게 실력이다.",
      "계획 세우는 척 말고, 실행해.",
      "지금 미루면, 결국 더 크게 갚는다.",
      "딱 5분만 해. 시작이 반이다.",
      "네가 널 믿게 만드는 건 ‘행동’뿐이야.",
      "불안하면 더 해. 멈추면 더 불안해진다.",
      "컨디션 탓하지 마. 조건은 늘 불완전해.",
      "오늘 대충하면, 내일도 대충한다.",
      "네가 바뀌는 순간은 ‘지금’뿐.",
      "쉬는 건 좋아. 근데 도망치진 마.",
      "지금 안 하면, 미래의 네가 욕한다.",
      "시간은 공짜가 아니야. 오늘도 결제 중.",
      "마감은 안 기다려. 네가 맞춰야 해.",
      "머리 속에서만 하지 말고, 손을 움직여.",
      "할 일 하나 끝내면, 기분이 따라온다.",
      "의욕이 아니라 습관으로 버텨.",
      "지금 안 하면, 다음도 못 한다.",
      "한 번만 더 눕는다고 인생이 나아지진 않아.",
      "지금 하는 게 제일 빠른 길이다.",
      "너 자신과 한 약속부터 지켜.",
      "오늘을 버리면, 너를 버리는 거랑 같아.",
      "‘피곤해’는 사실 ‘미루고 싶어’일 때가 많다.",
      "너의 목표는 네 변명을 모른다.",
      "할 수 있는 만큼만? 그럼 늘 그만큼만 산다.",
      "네가 해야 할 일은 네가 제일 잘 알잖아.",
      "불편함을 피하면, 성장은 없다.",
      "잘하려고 미루지 마. 그냥 해.",
      "진짜 강한 사람은 ‘하기 싫을 때’ 한다.",
      "오늘의 작은 승리가 자신감을 만든다.",
      "시작하면 별거 아니다. 시작이 제일 무겁다.",
      "지금 손에 쥔 폰이 네 시간을 훔친다.",
      "집중 15분이면 판이 바뀐다.",
      "할 일 미루는 동안, 경쟁자는 한다.",
      "오늘 덜 하면, 내일 더 힘들다.",
      "네 인생은 네 스케줄대로만 바뀐다.",
      "마음이 아니라 캘린더로 움직여.",
      "지금 한 번만 더 하면, 너는 달라진다.",
      "너의 기준을 네가 낮추지 마.",
      "네가 끝까지 하는 사람인 걸 증명해."
    ];

    const whipScreen = document.getElementById("whipScreen");
    const quoteScreen = document.getElementById("quoteScreen");
    const whipBtn = document.getElementById("whipBtn");
    const moreBtn = document.getElementById("moreBtn");
    const quoteEl = document.getElementById("quote");

    function randQuote(){
      return QUOTES[Math.floor(Math.random() * QUOTES.length)];
    }

    // mp3 paths
    const whipSound = new Audio("assets/whip.mp3");
    const horseSound = new Audio("assets/horse.mp3");
    whipSound.preload = "auto";
    horseSound.preload = "auto";
    whipSound.volume = 1.0;
    horseSound.volume = 0.9;

    async function playSequence(){
      try { whipSound.pause(); whipSound.currentTime = 0; } catch(e) {}
      try { horseSound.pause(); horseSound.currentTime = 0; } catch(e) {}

      // iOS: click handler 안에서 play()해야 함
      try { await whipSound.play(); } catch(e) {}

      // whip 다음 horse (딜레이 늘림)
      setTimeout(() => {
        try { horseSound.currentTime = 0; horseSound.play(); } catch(e) {}
      }, 320);
    }

    async function hitWhip(){
      if (navigator.vibrate) navigator.vibrate([12, 30, 12]);

      await playSequence();

      quoteEl.classList.remove("pop");
      void quoteEl.offsetWidth;
      quoteEl.textContent = randQuote();
      quoteEl.classList.add("pop");

      whipScreen.style.display = "none";
      quoteScreen.style.display = "flex";
    }

    function backToStart(){
      quoteScreen.style.display = "none";
      whipScreen.style.display = "flex";
      quoteEl.textContent = "";
    }

    whipBtn.addEventListener("click", hitWhip);
    moreBtn.addEventListener("click", backToStart);
    quoteEl.textContent = "";
  </script>
</body>
</html>